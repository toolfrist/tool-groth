<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyword Density Checker - MultiTools Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="header-placeholder"></div>
    <div class="container my-5">
        <div class="tool-container">
            <div class="tool-header">
                <h1><i class="bi bi-bar-chart"></i> Keyword Density Checker</h1>
                <p>Analyze keyword frequency and density in your content</p>
            </div>

            <div class="ad-placeholder bg-secondary p-2 rounded mb-4 text-center">
                <small class="text-muted">Advertisement</small>
            </div>

            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="keywordInput" class="form-label">Keyword / Phrase</label>
                        <input type="text" class="form-control" id="keywordInput" placeholder="e.g. online tools">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="minWordLen" class="form-label">Min Word Length (for auto list)</label>
                        <input type="number" class="form-control" id="minWordLen" value="3" min="1" max="10">
                    </div>
                </div>
            </div>

            <div class="form-group mb-3">
                <label for="textInput" class="form-label">Content</label>
                <textarea class="form-control" id="textInput" rows="10" placeholder="Paste or type your content here..."></textarea>
            </div>

            <div class="btn-group w-100 mb-3" role="group">
                <button class="btn btn-primary" onclick="checkDensity()"><i class="bi bi-search"></i> Check Density</button>
                <button class="btn btn-outline-secondary" onclick="autoKeywords()"><i class="bi bi-lightbulb"></i> Suggest Keywords</button>
                <button class="btn btn-outline-danger" onclick="clearFields()"><i class="bi bi-x-circle"></i> Clear</button>
            </div>

            <div id="resultContainer" style="display:none;">
                <div class="result-box">
                    <h4>Keyword Density</h4>
                    <p class="mb-1"><strong>Keyword:</strong> <span id="keywordLabel"></span></p>
                    <p class="mb-1"><strong>Total Words:</strong> <span id="totalWords">0</span></p>
                    <p class="mb-1"><strong>Occurrences:</strong> <span id="occurrences">0</span></p>
                    <p class="mb-1"><strong>Density:</strong> <span id="density">0%</span></p>
                    <p class="mb-1"><strong>Positions:</strong> <span id="positions">-</span></p>
                </div>
            </div>

            <div id="suggestionsContainer" style="display:none;" class="mt-3">
                <div class="result-box">
                    <h4>Top Keywords</h4>
                    <ul id="keywordList" class="mb-0"></ul>
                </div>
            </div>
        </div>
    </div>
    <div id="footer-placeholder"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="common.js"></script>
    <script>
        function tokenize(text) {
            return text
                .toLowerCase()
                .replace(/[^a-z0-9\\s]/g, ' ')
                .split(/\\s+/)
                .filter(Boolean);
        }

        function checkDensity() {
            const keyword = document.getElementById('keywordInput').value.trim().toLowerCase();
            const text = document.getElementById('textInput').value;
            if (!keyword || !text.trim()) {
                alert('Please enter a keyword and some content.');
                return;
            }

            const words = tokenize(text);
            const totalWords = words.length;
            const keywordWords = keyword.split(/\\s+/);

            let occurrences = 0;
            let positions = [];
            for (let i = 0; i <= words.length - keywordWords.length; i++) {
                if (keywordWords.every((kw, idx) => words[i + idx] === kw)) {
                    occurrences++;
                    positions.push(i + 1);
                }
            }

            const density = totalWords ? ((occurrences / totalWords) * 100).toFixed(2) : 0;

            document.getElementById('keywordLabel').textContent = keyword;
            document.getElementById('totalWords').textContent = totalWords;
            document.getElementById('occurrences').textContent = occurrences;
            document.getElementById('density').textContent = density + '%';
            document.getElementById('positions').textContent = positions.length ? positions.join(', ') : 'None';
            document.getElementById('resultContainer').style.display = 'block';
        }

        function autoKeywords() {
            const text = document.getElementById('textInput').value;
            const minLen = Math.max(1, parseInt(document.getElementById('minWordLen').value) || 3);
            if (!text.trim()) {
                alert('Please enter some content first.');
                return;
            }
            const words = tokenize(text).filter(w => w.length >= minLen);
            const counts = {};
            words.forEach(w => counts[w] = (counts[w] || 0) + 1);
            const list = Object.entries(counts)
                .sort((a,b) => b[1]-a[1])
                .slice(0,10);
            const ul = document.getElementById('keywordList');
            ul.innerHTML = '';
            list.forEach(([word,count]) => {
                const li = document.createElement('li');
                li.textContent = `${word} â€” ${count}`;
                li.className = 'mb-1';
                ul.appendChild(li);
            });
            document.getElementById('suggestionsContainer').style.display = list.length ? 'block' : 'none';
        }

        function clearFields() {
            document.getElementById('keywordInput').value = '';
            document.getElementById('textInput').value = '';
            document.getElementById('resultContainer').style.display = 'none';
            document.getElementById('suggestionsContainer').style.display = 'none';
        }
    </script>
</body>
</html>
