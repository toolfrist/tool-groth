<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Generator - MultiTools Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="header-placeholder"></div>
    <div class="container my-5">
        <div class="tool-container">
            <div class="tool-header">
                <h1><i class="bi bi-receipt"></i> Invoice Generator</h1>
                <p>Generate professional invoices</p>
            </div>
            
            <div class="ad-placeholder bg-secondary p-2 rounded mb-4 text-center">
                <small class="text-muted">Advertisement</small>
            </div>

            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <h5>From (Your Business)</h5>
                    <div class="form-group">
                        <input type="text" class="form-control mb-2" id="fromName" placeholder="Company Name">
                        <input type="text" class="form-control mb-2" id="fromAddress" placeholder="Address">
                        <input type="email" class="form-control" id="fromEmail" placeholder="Email">
                    </div>
                </div>
                <div class="col-md-6">
                    <h5>To (Client)</h5>
                    <div class="form-group">
                        <input type="text" class="form-control mb-2" id="toName" placeholder="Client Name">
                        <input type="text" class="form-control mb-2" id="toAddress" placeholder="Address">
                        <input type="email" class="form-control" id="toEmail" placeholder="Email">
                    </div>
                </div>
            </div>

            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="invoiceNumber" class="form-label">Invoice Number</label>
                        <input type="text" class="form-control" id="invoiceNumber" placeholder="INV-001">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="invoiceDate" class="form-label">Date</label>
                        <input type="date" class="form-control" id="invoiceDate">
                    </div>
                </div>
            </div>

            <div class="form-group mb-3">
                <label for="items" class="form-label">Items (one per line: Description | Quantity | Price)</label>
                <textarea class="form-control" id="items" rows="5" placeholder="Item 1 | 2 | 50.00"></textarea>
            </div>

            <button class="btn btn-primary w-100 mb-3" onclick="generateInvoice()">
                <i class="bi bi-receipt"></i> Generate Invoice
            </button>

            <div id="resultContainer" style="display: none;">
                <div class="result-box">
                    <h4>Invoice Preview</h4>
                    <div id="invoicePreview" class="border p-4 bg-white"></div>
                    <button class="btn btn-success w-100 mt-3" onclick="downloadInvoice()">
                        <i class="bi bi-download"></i> Download Invoice
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div id="footer-placeholder"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="common.js"></script>
    <script>
        function generateInvoice() {
            const fromName = document.getElementById('fromName').value || 'Your Company';
            const fromAddress = document.getElementById('fromAddress').value || 'Your Address';
            const fromEmail = document.getElementById('fromEmail').value || 'your@email.com';
            const toName = document.getElementById('toName').value || 'Client Name';
            const toAddress = document.getElementById('toAddress').value || 'Client Address';
            const invoiceNumber = document.getElementById('invoiceNumber').value || 'INV-001';
            const invoiceDate = document.getElementById('invoiceDate').value || new Date().toISOString().split('T')[0];

            const itemsText = document.getElementById('items').value;
            const items = itemsText.split('\n').filter(line => line.trim()).map(line => {
                const parts = line.split('|').map(p => p.trim());
                return {
                    description: parts[0] || 'Item',
                    quantity: parseFloat(parts[1]) || 1,
                    price: parseFloat(parts[2]) || 0
                };
            });

            let total = 0;
            items.forEach(item => {
                total += item.quantity * item.price;
            });

            const invoiceHTML = `
                <h2>INVOICE</h2>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <strong>From:</strong><br>
                        ${fromName}<br>
                        ${fromAddress}<br>
                        ${fromEmail}
                    </div>
                    <div class="col-md-6">
                        <strong>To:</strong><br>
                        ${toName}<br>
                        ${toAddress}
                    </div>
                </div>
                <hr>
                <p><strong>Invoice #:</strong> ${invoiceNumber} | <strong>Date:</strong> ${invoiceDate}</p>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${items.map(item => `
                            <tr>
                                <td>${item.description}</td>
                                <td>${item.quantity}</td>
                                <td>$${item.price.toFixed(2)}</td>
                                <td>$${(item.quantity * item.price).toFixed(2)}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="3">Total:</th>
                            <th>$${total.toFixed(2)}</th>
                        </tr>
                    </tfoot>
                </table>
            `;

            document.getElementById('invoicePreview').innerHTML = invoiceHTML;
            document.getElementById('resultContainer').style.display = 'block';
        }

        function downloadInvoice() {
            const content = document.getElementById('invoicePreview').innerHTML;
            const html = `<!DOCTYPE html><html><head><title>Invoice</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"></head><body class="p-4">${content}</body></html>`;
            downloadFile(html, 'invoice.html', 'text/html');
        }
    </script>
</body>
</html>
