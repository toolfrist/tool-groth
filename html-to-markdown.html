<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML to Markdown Converter - MultiTools Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="header-placeholder"></div>
    <div class="container my-5">
        <div class="tool-container">
            <div class="tool-header">
                <h1><i class="bi bi-filetype-html"></i> HTML to Markdown Converter</h1>
                <p>Convert HTML code to Markdown format</p>
            </div>
            
            <div class="ad-placeholder bg-secondary p-2 rounded mb-4 text-center">
                <small class="text-muted">Advertisement</small>
            </div>

            <div class="form-group mb-3">
                <label for="htmlInput" class="form-label">HTML Code</label>
                <textarea class="form-control" id="htmlInput" rows="10" placeholder="Paste HTML code here..."></textarea>
            </div>

            <button class="btn btn-primary w-100 mb-3" onclick="convertToMarkdown()">
                <i class="bi bi-arrow-down"></i> Convert to Markdown
            </button>

            <div id="resultContainer" style="display: none;">
                <div class="result-box">
                    <h4>Markdown Output</h4>
                    <textarea id="markdownOutput" class="form-control result-text" rows="10" readonly></textarea>
                    <button class="btn btn-success w-100 mt-3" onclick="copyToClipboard(document.getElementById('markdownOutput').value, this)">
                        <i class="bi bi-clipboard"></i> Copy to Clipboard
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div id="footer-placeholder"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="common.js"></script>
    <script>
        function convertToMarkdown() {
            const html = document.getElementById('htmlInput').value;
            if (!html.trim()) {
                alert('Please enter HTML code');
                return;
            }

            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;
            
            let markdown = '';
            
            function processNode(node) {
                if (node.nodeType === 3) {
                    return node.textContent.trim();
                }
                
                const tagName = node.tagName ? node.tagName.toLowerCase() : '';
                let content = '';
                
                Array.from(node.childNodes).forEach(child => {
                    content += processNode(child);
                });
                
                switch(tagName) {
                    case 'h1': return '# ' + content + '\n\n';
                    case 'h2': return '## ' + content + '\n\n';
                    case 'h3': return '### ' + content + '\n\n';
                    case 'h4': return '#### ' + content + '\n\n';
                    case 'h5': return '##### ' + content + '\n\n';
                    case 'h6': return '###### ' + content + '\n\n';
                    case 'p': return content + '\n\n';
                    case 'strong':
                    case 'b': return '**' + content + '**';
                    case 'em':
                    case 'i': return '*' + content + '*';
                    case 'code': return '`' + content + '`';
                    case 'pre': return '```\n' + content + '\n```\n\n';
                    case 'a': 
                        const href = node.getAttribute('href') || '';
                        return '[' + content + '](' + href + ')';
                    case 'ul':
                    case 'ol':
                        return content + '\n';
                    case 'li': return '- ' + content + '\n';
                    case 'br': return '\n';
                    case 'hr': return '---\n\n';
                    case 'blockquote': return '> ' + content + '\n\n';
                    default: return content;
                }
            }
            
            markdown = processNode(tempDiv).trim();
            
            document.getElementById('markdownOutput').value = markdown;
            document.getElementById('resultContainer').style.display = 'block';
        }
    </script>
</body>
</html>
